![t012e664b27aee15bb1](media/ce2236e0772a1d39e57cc81b44947b0f.png)![433292_145926046_2](media/3fe8f41d193c28604683035395ea4e8a.jpeg)

**《数据库系统原理A课程设计》**

（Curriculum design of Principle of Database System）

| 题 目    | 驾校信息管理系统         |            |            |
|----------|--------------------------|------------|------------|
| 学 院    | 计算机科学与通信工程学院 |            |            |
| 班 级    | 信息安全1901             |            |            |
| 组 员    | 李阳阳                   | 匡腾瞻     | 黄雨洁     |
| 学 号    | 3180901032               | 3190604018 | 3180901025 |
| 组员分工 | 管理员模块               | 教练模块   | 学员模块   |
| 指导教师 | 邢玉萍                   |            |            |
| 提交日期 | 2021年7月12日            |            |            |

# 

目录

[**一、 数据库设计 1**](#_Toc4868)

[1、需求分析 1](#_Toc6427)

[2、概念结构设计 2](#_Toc6427)

[3、逻辑结构设计 4](#_Toc6427)

[4、物理结构设计 4](#_Toc6427)

[5、数据库实施 8](#_Toc6427)

[**二、软件设计与实现 12**](#_Toc1271)

[1、软件总体概述 13](#_Toc6427)

[2、各模块的代码实现 15](#_Toc7993)

[3、软件测试 63](#_Toc8562)

[**三、课设总结 77**](#_Toc12015)

# 驾校管理系统

1.  **数据库设计**

1、需求分析

（1）数据查询

1.管理员查询学员或教练的基本信息（以下以学员为例）

输入：学员用户名

输出：学员姓名，性别，年龄，联系电话，身份证，报考类型，报名时间，到期时间，学车时长，已考科目，未考科目，所属教练，可用车辆，可用场地

2.教练查询自己所带学员的基本信息

输入：学员用户名

输出：学员姓名，性别，年龄，联系电话，身份证，报考类型，报名时间，到期时间，学车时长，已考科目，未考科目

3.管理员查询自己的基本信息

输入：管理员用户名

输出：姓名，性别，年龄，身份证，密码

4.教练查询自己的基本信息

输出：教练用户名，姓名，性别，年龄，联系电话，身份证，教龄，所拥有的车辆车牌，所拥有的场地

5.学员查询自己的基本信息

输出：学员用户名，学员姓名，性别，年龄，联系电话，身份证，报考类型，报名时间，到期时间，学车时长，已考科目，未考科目，所属教练，可用车辆，可用场地

6.管理员查询请假信息

输出：用户名，请假原因，请假日期

7.管理员查询自己收到的信息（来自教练/用户）

输入：学员/教练用户名，回复内容

8.教练/学员查询管理员发送的公告或给自己发送的信息

（2）数据插入

1.增加教练/学员，管理员将其基本信息（姓名，性别，年龄，身份证，报考类型等）录入系统，登陆密码自己输入设置，并设置相应权限。

2.管理员给教练分配可用车辆，可用场地等

（3）数据修改

1.管理员修改教练/学员基本信息（姓名，性别，年龄，身份证等）。

2.管理员/教练修改学员已考科目信息。

3.学员学车打卡（记录时间）。

（4）数据删除

1.管理员删除所有科目已考完学员的所有信息，回收登陆账号（删除）。

2.管理员删除已离职教练的所有信息，回收登陆账号（删除）。

2、概念结构设计

E-R模型：

![](media/c1c4ed662f9552056bc88ac1ed09b324.png)

图 2-1 **学员实体**

![](media/06db98e4db88e047eb1cdbcedccfa176.png)

图 2-2 **教练实体**

![](media/57885a205a3014bbb0bfe7848daad8c1.png)

图 2-3 **管理员实体**

![](media/2aaa4127e8cdc5aec82c2b203e29932a.png)

图 2-4 **全局E-R**

3、逻辑结构设计

关系模式：

学员（学员用户名，学员姓名，性别，年龄，联系电话，身份证，报考类型，报名时间，到期时间，学车时长，已考科目，未考科目，教练用户名，管理员用户名）

教练（教用户名，教练姓名，性别，年龄，联系电话，身份证，教龄，可用车辆，可用场地，管理员用户名）

管理员（管理员用户名，管理员姓名，性别，年龄，身份证，联系电话）

管理员消息表（用户名，消息，回复，日期）

教练消息表（data）学员消息表（data）

教练请假表（用户名，姓名，日期）

签到表（用户名，签到日期）

成绩表结构（用户名，科目1，科目2，科目3，科目4）

4、物理结构设计

数据表结构：

表 4-1 学员表结构

| 字段         | 类型      | 特殊属性     |
|--------------|-----------|--------------|
| 学员用户名   | CHAR(10)  | PRIMARY KEY  |
| 学员姓名     | CHAR(20)  | NOT NULL     |
| 性别         | CHAR(2)   | NOT NULL     |
| 年龄         | SMALLINT  | \>=18        |
| 身份证       | CHAR(20)  | UNIQUE       |
| 报考类型     | CHAR(5)   | NOT NULL     |
| 报名时间     | DATE      | NOT NULL     |
| 到期时间     | DATE      | NOT NULL     |
| 学车时长     | SMALLINT  | NOT NULL     |
| 已考科目     | CHAR(10)  |              |
| 未考科目     | CHAR(10)  |              |
| 教练用户名   | CHAR(10)  | FOREIGN KEY  |
| 管理员用户名 | CHAR(10)  | FOREIGN KEY  |
| 联系电话     | NCHAR(20) |              |

表 4- 2 教练表结构

| 字段         | 类型     | 特殊属性     |
|--------------|----------|--------------|
| 教练用户名   | CHAR(10) | PRIMARY KEY  |
| 教练姓名     | CHAR(20) | NOT NULL     |
| 性别         | CHAR(2)  | NOT NULL     |
| 年龄         | SMALLINT |              |
| 身份证       | CHAR(20) | UNIQUE       |
| 教龄         | SMALLINT |              |
| 可用车辆     | CHAR(50) |              |
| 可用场地     | CHAR(20) |              |
| 管理员用户名 | CHAR(10) | FOREIGN KEY  |

表 4- 3 管理员表结构

| 字段         | 类型      | 特殊属性    |
|--------------|-----------|-------------|
| 管理员用户名 | CHAR(10)  | PRIMARY KEY |
| 管理员姓名   | CHAR(20)  | NOT NULL    |
| 性别         | CHAR(2)   | NOT NULL    |
| 年龄         | SMALLINT  |             |
| 身份证       | CHAR(20)  | UNIQUE      |
| 联系电话     | nchar(20) | NOT NULL    |

表 4- 4 签到表结构

| 字段     | 类型        | 特殊类型    |
|----------|-------------|-------------|
| 用户名   | varchar(50) | PRIMARY KEY |
| 签到日期 | nchar(20)   | PRIMARY KEY |

表 4- 5 成绩表结构

| 字段   | 类型        | 特殊类型    |
|--------|-------------|-------------|
| 用户名 | varchar(50) | PRIMARY KEY |
| 科目一 | nchar(20)   | NOT NULL    |
| 科目二 | nchar(20)   | NOT NULL    |
| 科目三 | nchar(20)   | NOT NULL    |
| 科目四 | nchar(20)   | NOT NULL    |

表 4- 6 预约表结构

| 字段       | 类型        | 特殊类型    |
|------------|-------------|-------------|
| 用户名     | varchar(50) | PRIMARY KEY |
| 预约日期   | nchar(20)   | PRIMARY KEY |
| 预约时间段 | nchar(20)   | PRIMARY KEY |

表 4- 7 管理员消息表结构

| 字段   | 类型          | 特殊类型    |
|--------|---------------|-------------|
| 用户名 | varchar(50)   | PRIMARY KEY |
| 姓名   | varchar(50)   |             |
| 消息   | varchar(2000) | NOT NULL    |
| 回复   | varchar(2000) | NOT NULL    |
| 日期   | varchar(5)    | NOT NULL    |

表 4- 8 教练_学员消息表结构

| 字段   | 类型          | 特殊类型    |
|--------|---------------|-------------|
| 用户名 | varchar(50)   | PRIMARY KEY |
| 姓名   | varchar(50)   |             |
| 消息   | varchar(2000) | NOT NULL    |
| 回复   | varchar(2000) | NOT NULL    |
| 日期   | varchar(5)    | NOT NULL    |

表 4- 9 教练请假表结构

| 字段       | 类型        | 特殊类型    |
|------------|-------------|-------------|
| 教练用户名 | varchar(50) | PRIMARY KEY |
| 教练姓名   | nchar(20)   | PRIMARY KEY |
| 请假日期   | nchar(20)   | PRIMARY KEY |

表 4- 10 教练消息表结构

| 字段 | 类型          | 特殊类型    |
|------|---------------|-------------|
| date | varchar(2000) | PRIMARY KEY |

表 4- 11 学员消息表结构

| 字段 | 类型          | 特殊类型    |
|------|---------------|-------------|
| date | varchar(2000) | PRIMARY KEY |

5、数据库实施

1.  数据库建立

![](media/1dcdce9df56939fe9f5871a73b8c6693.png)

图 5-1-1 建数据库

1.  数据表建立

![](media/44563493e95e4dfcffd5477bca91e4d0.png)

图 5- 2 - 1 管理员表

![](media/b2e30e08610f84077367ffb900e43595.png)

图 5- 2 - 2 教练表

![](media/f516afedb0540e130f8684a57559447e.png)

图 5- 2 - 3 学员表

![](media/bf76e6ec23688655e7516e3c0effcd05.png)

图 5- 2 - 4 学员表![](media/7cabcbad933fc5057c03aad1caf73917.png)

图 5- 2 - 5 学员表

**二、软件设计与实现**

1、软件总体概述

**![](media/6af683df594671a48151bc99ef54c32c.png)**

**![](media/03ec0bfb17967333d82f2c4c12973c5d.png)**![](media/9812799892a3a20f31a8c90a032a104c.png)

2、各模块的代码实现

（1）登录注册模块

**登录页面：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 登录页面 : Form  {  public static string strname;  public 登录页面()  {  InitializeComponent();  }  private void button2_Click(object sender, EventArgs e)  {  注册页面 注册 = new 注册页面();  注册.Show();  this.Hide();  }  private void button1_Click(object sender, EventArgs e)  {  if(textBox1.Text!=""&&textBox2.Text!="")  {  if(radioButton1.Checked \|\| radioButton2.Checked \|\| radioButton3.Checked)  {  //提交对比登录信息是否正确  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  string 类别;  if (radioButton1.Checked)  {  类别 = "管理员";  }  else if (radioButton2.Checked)  {  类别 = "教练";  }  else  {  类别 = "学员";  }  SqlCommand sqlCommand = new SqlCommand("select \* from " + 类别 + "_用户名_密码表 where 用户名 = '" + textBox1.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  string user = (string)sqlDataReader["用户名"];//强制转换不可忘  string psw = (string)sqlDataReader["密码"];//强制转换不可忘  if (user == textBox1.Text && psw == textBox2.Text)//判断密码是否正确  {  strname = textBox1.Text;  switch (类别)//用户名，密码正确的情况下跳转至相应页面  {  case "管理员":  管理员页面 管理员 = new 管理员页面();  管理员.Show();  this.Hide();  break;  case "教练":  教练页面 教练 = new 教练页面();  教练.Show();  this.Hide();  break;  case "学员":  学员页面 学员 = new 学员页面();  学员.Show();  this.Hide();  break;  default: break;  }   }  else  {  MessageBox.Show("用户名/密码错误！");  }  }    }  else  {  MessageBox.Show("用户不存在！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  else  {  MessageBox.Show("请选择身份类型！");  }  }  else  {  MessageBox.Show("用户名/密码不能为空！");  }   }  private void label4_Click(object sender, EventArgs e)  {   }  } } |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**注册页面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient;  namespace 驾校信息管理系统 {  public partial class 注册页面 : Form  {  public 注册页面()  {  InitializeComponent();  }   private void button1_Click(object sender, EventArgs e)  {  //提交注册信息  if (textBox1.Text != "" && textBox2.Text != "" && textBox3.Text != "" && textBox4.Text != "" && textBox5.Text != "" && comboBox1.Text != "")  {  if (textBox2.Text == textBox3.Text)  {  if(radioButton1.Checked\|\|radioButton2.Checked)  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)//连接数据库  {  con.Open();  }  string str1;  if (radioButton1.Checked)//只能注册教练和学员，管理员需已有账号分配  {  str1 = "教练";  }  else  {  str1 = "学员";  }  SqlCommand sqlCommand = new SqlCommand("select \* from " + str1 + "_用户名_密码表 where 用户名 = '" + textBox1.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (!sqlDataReader.HasRows)//判断用户是否已存在  {  string strsql = "insert into " + str1 + "_用户名_密码表(用户名, 密码, 邮箱) values( '" + textBox1.Text + "','" + textBox2.Text + "','" + textBox4.Text + comboBox1.Text + "');";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("注册成功,请返回登录！");  }  else  {  MessageBox.Show("注册失败，请重新注册！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox3.Text = "";  textBox4.Text = "";  textBox5.Text = "";  comboBox1.Text = "";  con.Close();  }  else  {  MessageBox.Show("该用户名已存在，请更换其他用户名注册！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }    }  else  {  MessageBox.Show("请选择注册类型！");  }  }  else  {  MessageBox.Show("两次填写的密码不一致，请重新填写！");  }  }  else  {  MessageBox.Show("信息填写不完整，请补全信息！");  }  }     private void button2_Click(object sender, EventArgs e)  {  //返回登录页面  登录页面 登录 = new 登录页面();  登录.Show();  this.Hide();  }   private void label6_Click(object sender, EventArgs e)  {   }   private void 注册页面_Load(object sender, EventArgs e)  {   }  } } |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

（2）管理员模块代码实现

**管理员主页和查询菜单源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient;  namespace 驾校信息管理系统 {  public partial class 管理员页面 : Form  {  public 管理员页面()  {  InitializeComponent();  }   private void 管理员页面_Load(object sender, EventArgs e)  {  toolStripStatusLabel1.Text = "登录用户：" + 登录页面.strname; //显示登录用户  toolStripStatusLabel2.Text = " \|\| 登录时间：" + DateTime.Now.ToString();  label1.Visible = false;  dataGridView1.Visible = false;  }   private void 添加管理员ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;   添加管理员页面 添加管理员 = new 添加管理员页面();  添加管理员.MdiParent = this;  添加管理员.StartPosition = FormStartPosition.CenterScreen;  添加管理员.Show();   //this.Hide();   }  private void 添加教练ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;   添加教练页面 添加教练 = new 添加教练页面();  添加教练.MdiParent = this;  //this.Hide();  添加教练.Show();  }  private void 添加学员ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;   添加学员页面 添加学员 = new 添加学员页面();  添加学员.MdiParent = this;  //this.Hide();  添加学员.Show();  }  private void button2_Click(object sender, EventArgs e)  {  //返回登录页面  登录页面 登录 = new 登录页面();  登录.Show();  this.Hide();  }  private void 退出账号ToolStripMenuItem_Click(object sender, EventArgs e)  {  //返回登录页面  登录页面 登录 = new 登录页面();  登录.Show();  this.Hide();  }  private void 个人信息ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;   账户设置 账户设置页面 = new 账户设置();  账户设置页面.MdiParent = this;  账户设置页面.Show();   }  private void 查看帮助ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;  System.Diagnostics.Process.Start("chrome.exe", "https://www.ujs.edu.cn/");  }   private void 检查更新ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;  MessageBox.Show("当前已是最新版本！");  }  private void 查询管理员基本信息ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = true;  dataGridView1.Visible = true;  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter = new SqlDataAdapter("select \* from 管理员表", con);  DataSet mytb = new DataSet();  sqlDataAdapter.Fill(mytb, "管理员表");  dataGridView1.DataSource = mytb.Tables["管理员表"];  label1.Text = "管理员表基本信息";  }  private void 查询教练信息ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = true;  dataGridView1.Visible = true;  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter = new SqlDataAdapter("select \* from 教练表", con);  DataSet mytb = new DataSet();  sqlDataAdapter.Fill(mytb, "教练表");  dataGridView1.DataSource = mytb.Tables["教练表"];  label1.Text = "教练表基本信息";  }  private void 查询学员信息ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = true;  dataGridView1.Visible = true;  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter = new SqlDataAdapter("select \* from 学员表", con);  DataSet mytb = new DataSet();  sqlDataAdapter.Fill(mytb, "学员表");  dataGridView1.DataSource = mytb.Tables["学员表"];  label1.Text = "学员表基本信息";  }  private void 公告ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = false;  dataGridView1.Visible = false;  公告页面 信息公告 = new 公告页面();  信息公告.MdiParent = this;  信息公告.Show();  }  private void 我的消息ToolStripMenuItem_Click(object sender, EventArgs e)  {  管理员消息页面 管理员消息 = new 管理员消息页面();  管理员消息.MdiParent = this;  管理员消息.Show();  }  private void 请假信息ToolStripMenuItem_Click(object sender, EventArgs e)  {  label1.Visible = true;  dataGridView1.Visible = true;  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter = new SqlDataAdapter("select \* from 教练请假表", con);  DataSet mytb = new DataSet();  sqlDataAdapter.Fill(mytb, "教练请假表");  dataGridView1.DataSource = mytb.Tables["教练请假表"];  label1.Text = "教练请假表基本信息";  }  } } |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**管理员账户设置页面源码**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 账户设置 : Form  {  public 账户设置()  {  InitializeComponent();  }  private void button3_Click(object sender, EventArgs e)  {  //查询自己信息  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 管理员表,管理员_用户名_密码表 where 管理员用户名 = '" + 登录页面.strname + "' and 管理员用户名=用户名", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  textBox1.Text = (string)sqlDataReader["管理员用户名"];//强制转换不可忘  textBox2.Text = (string)sqlDataReader["管理员姓名"];  comboBox1.Text = (string)sqlDataReader["性别"];  textBox4.Text = Convert.ToString(sqlDataReader["年龄"]);  textBox5.Text = (string)sqlDataReader["身份证"];  if(sqlDataReader["联系电话"]!=null)  {  textBox6.Text = (string)sqlDataReader["联系电话"];  }  if(checkBox1.Checked)  {  textBox3.UseSystemPasswordChar = false;  }  else  {  textBox3.UseSystemPasswordChar = true;  }  textBox3.Text = (string)sqlDataReader["密码"];  textBox7.Text = (string)sqlDataReader["邮箱"];  }  }  else  {  MessageBox.Show("用户不存在！");  textBox1.Text = "";//强制转换不可忘  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  textBox3.Text = "";  textBox7.Text = "";  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void 账户设置_Load(object sender, EventArgs e)  {  //查询自己信息  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 管理员表,管理员_用户名_密码表 where 管理员用户名 = '" + 登录页面.strname + "' and 管理员用户名=用户名", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  textBox1.Text = (string)sqlDataReader["管理员用户名"];//强制转换不可忘  textBox2.Text = (string)sqlDataReader["管理员姓名"];  comboBox1.Text = (string)sqlDataReader["性别"];  textBox4.Text = Convert.ToString(sqlDataReader["年龄"]);  textBox5.Text = (string)sqlDataReader["身份证"];  if (sqlDataReader["联系电话"] != null)  {  textBox6.Text = (string)sqlDataReader["联系电话"];  }  textBox3.Text = (string)sqlDataReader["密码"];  textBox7.Text = (string)sqlDataReader["邮箱"];  }  }  else  {  MessageBox.Show("用户不存在！");  textBox1.Text = "";//强制转换不可忘  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  textBox3.Text = "";  textBox7.Text = "";  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void button2_Click(object sender, EventArgs e)  {  //管理员信息更新  string 管理员姓名 = string.Empty, 性别 = string.Empty, 身份证 = string.Empty, 年龄 = string.Empty, 联系电话 = string.Empty, 密码 = string.Empty, 邮箱 = string.Empty;  if (textBox2.Text != "")  {  管理员姓名 = textBox2.Text;  }  if (comboBox1.Text != "")  {  性别 = comboBox1.Text;  }  if (textBox4.Text != "")  {  年龄 = textBox4.Text;  }  if (textBox5.Text != "")  {  身份证 = textBox5.Text;  }  if (textBox6.Text != "")  {  联系电话 = textBox6.Text;  }  if (textBox3.Text != "")  {  密码 = textBox3.Text;  }  if (textBox7.Text != "")  {  邮箱 = textBox7.Text;  }  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "update 管理员表 set 管理员姓名='" + 管理员姓名 + "'," + " 性别='" + 性别 + "'," + "年龄=" + 年龄 + "," + "身份证='" + 身份证 + "'," + "联系电话='" + 联系电话 + "' where 管理员用户名 = '" + textBox1.Text+ "';update 管理员_用户名_密码表 set 密码='" + 密码 + "'," + "邮箱='" + 邮箱 + "' where 用户名='"+textBox1.Text+"'";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("修改成功！");  }  else  {  MessageBox.Show("修改失败！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  comboBox1.Text = "";  textBox3.Text = "";  textBox7.Text = "";  con.Close();  }  } } |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**管理员消息页面源码**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 管理员消息页面 : Form  {  public 管理员消息页面()  {  InitializeComponent();  }  private void 管理员消息页面_Load(object sender, EventArgs e)  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter = new SqlDataAdapter("select \* from 管理员消息表 where 管理员消息表.用户名 in (select 教练用户名 from 教练表)", con);  DataSet mytb = new DataSet();  sqlDataAdapter.Fill(mytb, "教练信息表");  dataGridView1.DataSource = mytb.Tables["教练信息表"];     SqlConnection con1 = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter1 = new SqlDataAdapter("select \* from 管理员消息表 where 管理员消息表.用户名 in (select 学员用户名 from 学员表)", con1);  DataSet mytb1 = new DataSet();  sqlDataAdapter1.Fill(mytb1, "学员信息表");  dataGridView2.DataSource = mytb1.Tables["学员信息表"];  }  private void button1_Click(object sender, EventArgs e)  {  //给教练回复  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统; MultipleActiveResultSets =true;";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)//连接数据库  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 管理员消息表 where 用户名 = '" + textBox1.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断用户是否存在  {  string strsql = "update 管理员消息表 set 回复='" + textBox2.Text + "' where 用户名 = '" + textBox1.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("回复成功！");  }  else  {  MessageBox.Show("回复失败！");  }  //回复完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  con.Close();  }  else  {  MessageBox.Show("该用户名不存在，请更换用户名！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void button2_Click(object sender, EventArgs e)  {  //给学员回复  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统; MultipleActiveResultSets=true;";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)//连接数据库  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 管理员消息表 where 用户名 = '" + textBox3.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断用户是否存在  {  string strsql = "update 管理员消息表 set 回复='" + textBox4.Text + "' where 用户名 = '" + textBox3.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("回复成功！");  }  else  {  MessageBox.Show("回复失败！");  }  //回复完后清空textBox  textBox3.Text = "";  textBox4.Text = "";  con.Close();  }  else  {  MessageBox.Show("该用户名不存在，请更换用户名！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  } } |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**管理员添加/更新\*\*菜单源码**

| **增删改查管理员页面**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 添加管理员页面 : Form  {  public 添加管理员页面()  {  InitializeComponent();  }  private void button2_Click(object sender, EventArgs e)  {  //管理员信息更新  string 管理员姓名 = string.Empty, 性别 = string.Empty, 身份证 = string.Empty, 年龄 = string.Empty, 联系电话 = string.Empty;  if(textBox2.Text!="")  {  管理员姓名 = textBox2.Text;  }  if (comboBox1.Text != "")  {  性别 = comboBox1.Text;  }  if (textBox4.Text != "")  {  年龄 = textBox4.Text;  }  if (textBox5.Text != "")  {  身份证 = textBox5.Text;  }  if (textBox6.Text != "")  {  联系电话 = textBox6.Text;  }  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "update 管理员表 set 管理员姓名='" + 管理员姓名 + "'," + " 性别='" + 性别 + "'," + "年龄=" + 年龄 + "," + "身份证='" + 身份证 + "'," + "联系电话='" + 联系电话 + "' where 管理员用户名 = '" + textBox1.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("修改成功！");  }  else  {  MessageBox.Show("修改失败！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  comboBox1.Text = "";  con.Close();  }  private void button1_Click(object sender, EventArgs e)  {  //管理员信息添加  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "insert into 管理员表(管理员用户名, 管理员姓名, 性别, 年龄, 身份证,联系电话) values( '" + textBox1.Text + "','" + textBox2.Text + "','" + comboBox1.Text + "'," + Convert.ToInt32(textBox4.Text) + ",'" + textBox5.Text + "','" + textBox6.Text + "');";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("添加成功！");   }  else  {  MessageBox.Show("添加失败！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  comboBox1.Text = "";  con.Close();  }  private void button3_Click(object sender, EventArgs e)  {  //查询某一个管理员信息  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 管理员表 where 管理员用户名 = '" + textBox1.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  textBox1.Text = (string)sqlDataReader["管理员用户名"];//强制转换不可忘  textBox2.Text = (string)sqlDataReader["管理员姓名"];  comboBox1.Text = (string)sqlDataReader["性别"];  textBox4.Text = Convert.ToString(sqlDataReader["年龄"]);  textBox5.Text = (string)sqlDataReader["身份证"];  textBox6.Text = (string)sqlDataReader["联系电话"];  }  }  else  {  MessageBox.Show("用户不存在！");  textBox1.Text = "";//强制转换不可忘  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void 添加管理员页面_Load(object sender, EventArgs e)  {   }  } }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **增删改查教练页面**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 添加教练页面 : Form  {  public 添加教练页面()  {  InitializeComponent();  }   private void 添加教练页面_Load(object sender, EventArgs e)  {   }   private void button1_Click(object sender, EventArgs e)  {  //添加教练  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "insert into 教练表(教练用户名, 教练姓名, 性别, 年龄, 身份证,教龄,可用车辆,可用场地,管理员用户名,联系电话) values( '" + textBox1.Text + "','" + textBox2.Text + "','" + comboBox1.Text + "'," + Convert.ToInt32(textBox4.Text) + ",'" + textBox5.Text + "'," + Convert.ToInt32(textBox6.Text) + ",'" + textBox7.Text + "','" + textBox8.Text + "','" + 登录页面.strname + "','" + textBox9.Text + "');";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("添加成功！");  }  else  {  MessageBox.Show("添加失败！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  textBox7.Text = "";  textBox8.Text = "";  textBox9.Text = "";  con.Close();  }  private void button3_Click(object sender, EventArgs e)  {  //查询某一个管理员信息  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 教练表 where 教练用户名 = '" + textBox1.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  textBox1.Text = (string)sqlDataReader["教练用户名"];//强制转换不可忘  textBox2.Text = (string)sqlDataReader["教练姓名"];  comboBox1.Text = (string)sqlDataReader["性别"];  textBox4.Text = Convert.ToString(sqlDataReader["年龄"]);  textBox5.Text = (string)sqlDataReader["身份证"];  textBox6.Text = Convert.ToString(sqlDataReader["教龄"]);  textBox7.Text = (string)sqlDataReader["可用车辆"];  textBox8.Text = (string)sqlDataReader["可用场地"];  textBox9.Text = (string)sqlDataReader["联系电话"];  }  }  else  {  MessageBox.Show("用户不存在！");  textBox1.Text = "";//强制转换不可忘  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  textBox7.Text = "";  textBox8.Text = "";  textBox9.Text = "";  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void button2_Click(object sender, EventArgs e)  {  //管理员信息更新  string 教练姓名 = string.Empty, 性别 = string.Empty, 身份证 = string.Empty, 年龄 = string.Empty, 教龄 = string.Empty, 可用车辆 = string.Empty, 可用场地 = string.Empty, 联系电话 = string.Empty;  if (textBox2.Text != "")  {  教练姓名 = textBox2.Text;  }  if (comboBox1.Text != "")  {  性别 = comboBox1.Text;  }  if (textBox4.Text != "")  {  年龄 = textBox4.Text;  }  if (textBox5.Text != "")  {  身份证 = textBox5.Text;  }  if (textBox6.Text != "")  {  教龄 = textBox6.Text;  }  if (textBox7.Text != "")  {  可用车辆 = textBox7.Text;  }   if (textBox8.Text != "")  {  可用场地 = textBox8.Text;  }  if (textBox9.Text != "")  {  联系电话 = textBox9.Text;  }  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "update 教练表 set 教练姓名='" + 教练姓名 + "'," + " 性别='" + 性别 + "'," + "年龄=" + 年龄 + "," + "身份证='" + 身份证 + "'," + "教龄='" + 教龄 + "'," + "可用场地='" + 可用场地 + "'," + "可用车辆='" + 可用车辆 + "'," + "联系电话='" + 联系电话 + "' where 教练用户名 = '" + textBox1.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("修改成功！");  }  else  {  MessageBox.Show("修改失败！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox6.Text = "";  textBox7.Text = "";  textBox8.Text = "";  textBox9.Text = "";  con.Close();  }  private void button4_Click(object sender, EventArgs e)  {  //删除学员  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlCommand sqlCommand = new SqlCommand("select \* from 教练表 where 教练用户名 = '" + textBox1.Text + "'", con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  string strsql = "DELETE FROM 教练表 WHERE 教练用户名 = '" + textBox1.Text + "';" + "DELETE FROM 教练_用户名_密码表 WHERE 用户名 = '" + textBox1.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  sqlDataReader.Close();  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("删除成功！");  }  else  {  MessageBox.Show("删除失败！");  }  //更新后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox7.Text = "";  textBox6.Text = "";  textBox8.Text = "";  textBox9.Text = "";  comboBox1.Text = "";  }  else  {  MessageBox.Show("用户不存在！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  } }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **增删改查学员页面**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 添加学员页面 : Form  {  public 添加学员页面()  {  InitializeComponent();  }   private void button1_Click(object sender, EventArgs e)  {  //添加学员  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);   string strCollected = string.Empty;  string unstrCollected = string.Empty;  for (int i = 0; i \< checkedListBox1.Items.Count; i++)  {  if (checkedListBox1.GetItemChecked(i))  {  if (strCollected == string.Empty)  {  strCollected = checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  else  {  strCollected = strCollected+","+ checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  }  else  {  if (unstrCollected == string.Empty)  {  unstrCollected = checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  else  {  unstrCollected = unstrCollected + "," + checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  }  }   string strsql = "insert into 学员表(学员用户名, 学员姓名, 性别, 年龄, 身份证,报考类型,报名时间,到期时间,学车时长,已考科目,未考科目,教练用户名,管理员用户名,联系电话) values( '" + textBox1.Text + "','" + textBox2.Text + "','" + comboBox1.Text + "'," + Convert.ToInt32(textBox4.Text) + ",'" + textBox5.Text + "','" + comboBox2.Text +"','"+ dateTimePicker2.Text + "','"+ dateTimePicker1.Text+"',"+ Convert.ToInt32(textBox7.Text) + ",'" + strCollected + "','" + unstrCollected + "','" + textBox10.Text + "','"+登录页面.strname +"','"+textBox3.Text +"');";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("添加成功！");  }  else  {  MessageBox.Show("添加失败！");  }  //添加完后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox3.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox7.Text = "";  textBox10.Text = "";  comboBox2.Text = "";  comboBox1.Text = "";  dateTimePicker1.Text = "";  for (int i = 0; i \< checkedListBox1.Items.Count; i++)  {  checkedListBox1.SetItemChecked(i, false); //设置第i项是否选中  }  con.Close();  }  private void 添加学员页面_Load(object sender, EventArgs e)  {  dateTimePicker1.Text = "";  }  private void button2_Click(object sender, EventArgs e)  {  //更新  string 学员姓名=string.Empty, 性别 = string.Empty, 身份证 = string.Empty, 报考类型 = string.Empty, 报名时间, 到期时间 = string.Empty, 已考科目 = string.Empty, 未考科目 = string.Empty, 教练用户名 = string.Empty, 管理员用户名, 联系电话 = string.Empty;  int 年龄 = 18, 学车时长 = 0;  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);   string strCollected = string.Empty;  string unstrCollected = string.Empty;  for (int i = 0; i \< checkedListBox1.Items.Count; i++)  {  if (checkedListBox1.GetItemChecked(i))  {  if (strCollected == string.Empty)  {  strCollected = checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  else  {  strCollected = strCollected + "," + checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  }  else  {  if (unstrCollected == string.Empty)  {  unstrCollected = checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  else  {  unstrCollected = unstrCollected + "," + checkedListBox1.GetItemText(checkedListBox1.Items[i]);  }  }  }  SqlCommand sqlCommand = new SqlCommand("select \* from 学员表 where 学员用户名 = '" + textBox1.Text + "'", con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  学员姓名= (string)sqlDataReader["学员姓名"];//强制转换不可忘  性别 = (string)sqlDataReader["性别"];   年龄 = Convert.ToInt32(sqlDataReader["年龄"]);   身份证 = (string)sqlDataReader["身份证"];   报考类型 = (string)sqlDataReader["报考类型"];   报名时间 = (string)sqlDataReader["报名时间"];   到期时间 = (string)sqlDataReader["到期时间"];   if(sqlDataReader["学车时长"]!=null)  {  学车时长 = Convert.ToInt32(sqlDataReader["学车时长"]);  }  if(sqlDataReader["已考科目"]!=null)  {  已考科目 = (string)sqlDataReader["已考科目"];  }  if(sqlDataReader["未考科目"]!=null)  {  未考科目 = (string)sqlDataReader["未考科目"];  }  if(sqlDataReader["教练用户名"]!=null)  {  教练用户名 = (string)sqlDataReader["教练用户名"];  }   管理员用户名 = (string)sqlDataReader["管理员用户名"];   联系电话 = (string)sqlDataReader["联系电话"];  }  if (textBox2.Text!="")  {  学员姓名 = textBox2.Text;  }  if(comboBox1.Text!="")  {  性别 = comboBox1.Text;  }  if(textBox4.Text!="")  {  年龄 = Convert.ToInt32(textBox4.Text);  }  if(textBox5.Text!="")  {  身份证 = textBox5.Text;  }  if (textBox3.Text != "")  {  联系电话 = textBox3.Text;  }  if (comboBox2.Text != "")  {  报考类型 = comboBox2.Text;  }  if (dateTimePicker1.Text!= 到期时间)  {  到期时间 = dateTimePicker1.Text;  }  if (textBox7.Text != "")  {  学车时长 = Convert.ToInt32(textBox7.Text);  }  if (textBox10.Text != "")  {  教练用户名 = textBox10.Text;  }  if(strCollected!="")  {  已考科目 = strCollected;  未考科目 = unstrCollected;  }  string strsql = "update 学员表 set 学员姓名='" + 学员姓名 + "'," + " 性别='" + 性别 + "'," +"年龄=" + 年龄 + "," + "身份证='" + 身份证 + "'," + "报考类型='" + 报考类型 + "'," + "到期时间='" + 到期时间 + "'," + "学车时长=" + 学车时长 + ","+ "已考科目='" + 已考科目 + "'," + "未考科目='" + 未考科目 + "'," + "教练用户名='" + 教练用户名 + "',"+ "管理员用户名='" + 登录页面.strname + "'," + "联系电话='" + 联系电话 + "' where 学员用户名 = '" + textBox1.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  sqlDataReader.Close();  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("修改成功！");  }  else  {  MessageBox.Show("修改失败！");  }  //更新后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox3.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox7.Text = "";  textBox10.Text = "";  comboBox2.Text = "";  comboBox1.Text = "";  dateTimePicker1.Text = "";  for (int i = 0; i \< checkedListBox1.Items.Count; i++)  {  checkedListBox1.SetItemChecked(i, false); //设置第i项是否选中  }  }  else  {  MessageBox.Show("用户不存在！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void button3_Click(object sender, EventArgs e)  {  //查询某一个学员信息  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 学员表 where 学员用户名 = '" + textBox1.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  textBox1.Text = (string)sqlDataReader["学员用户名"];//强制转换不可忘  textBox2.Text = (string)sqlDataReader["学员姓名"];  comboBox1.Text = (string)sqlDataReader["性别"];  textBox4.Text = Convert.ToString(sqlDataReader["年龄"]);  textBox5.Text = (string)sqlDataReader["身份证"];  comboBox2.Text = (string)sqlDataReader["报考类型"];  dateTimePicker1.Text = (string)sqlDataReader["到期时间"];  textBox7.Text = Convert.ToString(sqlDataReader["学车时长"]);  if ((string)sqlDataReader["已考科目"] == "科目1")  {  checkedListBox1.SetItemChecked(0, true);  }  else if((string)sqlDataReader["已考科目"] == "科目1,科目2")  {  checkedListBox1.SetItemChecked(0, true);  checkedListBox1.SetItemChecked(1, true);  }  else if((string)sqlDataReader["已考科目"] == "科目1,科目2,科目3")  {  checkedListBox1.SetItemChecked(0, true);  checkedListBox1.SetItemChecked(1, true);  checkedListBox1.SetItemChecked(2, true);  }  else if ((string)sqlDataReader["已考科目"] == "科目1,科目2,科目3,科目4")  {  checkedListBox1.SetItemChecked(0, true);  checkedListBox1.SetItemChecked(1, true);  checkedListBox1.SetItemChecked(2, true);  checkedListBox1.SetItemChecked(3, true);  }  else  {  checkedListBox1.SetItemChecked(0, false);  checkedListBox1.SetItemChecked(1, false);  checkedListBox1.SetItemChecked(2, false);  checkedListBox1.SetItemChecked(3, false);  }   textBox10.Text = (string)sqlDataReader["教练用户名"];  textBox3.Text = (string)sqlDataReader["联系电话"];  }  }  else  {  MessageBox.Show("用户不存在！");  textBox1.Text = "";//强制转换不可忘  textBox2.Text = "";  comboBox1.Text = "";  textBox4.Text = "";  textBox5.Text = "";  comboBox2.Text = "";  dateTimePicker1.Text = "";  textBox7.Text = "";  checkedListBox1.SetItemChecked(0, false);  checkedListBox1.SetItemChecked(1, false);  checkedListBox1.SetItemChecked(2, false);  checkedListBox1.SetItemChecked(3, false);  textBox10.Text = "";  textBox3.Text = "";  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void button4_Click(object sender, EventArgs e)  {  //删除学员  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  SqlCommand sqlCommand = new SqlCommand("select \* from 学员表 where 学员用户名 = '" + textBox1.Text + "'", con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  string strsql = "DELETE FROM 学员表 WHERE 学员用户名 = '" + textBox1.Text + "';" + "DELETE FROM 学员_用户名_密码表 WHERE 用户名 = '" + textBox1.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  sqlDataReader.Close();  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("删除成功！");  }  else  {  MessageBox.Show("删除失败！");  }  //更新后清空textBox  textBox1.Text = "";  textBox2.Text = "";  textBox3.Text = "";  textBox4.Text = "";  textBox5.Text = "";  textBox7.Text = "";  textBox10.Text = "";  comboBox2.Text = "";  comboBox1.Text = "";  dateTimePicker1.Text = "";  }  else  {  MessageBox.Show("用户不存在！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void dateTimePicker2_ValueChanged(object sender, EventArgs e)  {   }  } } |

**公告页面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; using System.IO; namespace 驾校信息管理系统 {  public partial class 公告页面 : Form  {  public 公告页面()  {  InitializeComponent();  }  private void button1_Click(object sender, EventArgs e)  {  textBox1.ReadOnly = false;  //教练信息编辑/读取   string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "BULK INSERT 教练消息表 FROM 'd:\\\\information_bulletin.txt' WITH (ROWTERMINATOR = '\\n') select \* from 教练消息表;";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlDataReader sqlDataReader = comm.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  string str = (string)sqlDataReader["data"];//强制转换不可忘  textBox1.Text = str;  }   }  else  {  MessageBox.Show("无信息可读！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }   private void 公告页面_Load(object sender, EventArgs e)  {  textBox1.Multiline = true;  textBox1.ReadOnly = true;  textBox1.Font = new Font("宋体", 12, FontStyle.Bold);   textBox2.Multiline = true;  textBox2.ReadOnly = true;  textBox2.Font = new Font("宋体", 12, FontStyle.Bold);  }   private void button2_Click(object sender, EventArgs e)  {  textBox1.ReadOnly = true;  //教练信息发布go \\n sp_configure 'show advanced options' ,1 \\n reconfigure \\n go \\n sp_configure 'xp_cmdshell',1 \\n reconfigure \\n go \\n   string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "exec xp_cmdshell 'echo " + textBox1.Text + "\> d:\\\\information_bulletin.txt'";    SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("发布成功！");  }  else  {  MessageBox.Show("发布失败！");  }  textBox1.ReadOnly = true;  con.Close();  }  private void button3_Click(object sender, EventArgs e)  {  textBox2.ReadOnly = false;  //学员信息编辑/读取   string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "BULK INSERT 学员消息表 FROM 'd:\\\\information_bulletin1.txt' select \* from 学员消息表;";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlDataReader sqlDataReader = comm.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  string str = (string)sqlDataReader["data"];//强制转换不可忘  textBox2.Text = str;  }   }  else  {  MessageBox.Show("无信息可读！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }  private void button4_Click(object sender, EventArgs e)  {  textBox2.ReadOnly = true;  //学员信息发布  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "exec xp_cmdshell 'echo " + textBox2.Text + "\> d:\\\\information_bulletin1.txt'";    SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("发布成功！");  }  else  {  MessageBox.Show("发布失败！");  }  textBox1.ReadOnly = true;  con.Close();  }  } } |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

（2）教练模块代码实现：

**教练主页面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 教练页面 : Form  {  public 教练页面()  {  InitializeComponent();  }   private void button1_Click(object sender, EventArgs e)  {  //返回登录页面  登录页面 登录 = new 登录页面();  登录.Show();  this.Hide();  }  private void 教练页面_Load(object sender, EventArgs e)  {  toolStripStatusLabel1.Text = "登录用户：" + 登录页面.strname; //显示登录用户  toolStripStatusLabel2.Text = " \|\| 登录时间：" + DateTime.Now.ToString();  }   private void button2_Click(object sender, EventArgs e) //进入教练个人信息  {  教练_教练个人信息 个人信息 = new 教练_教练个人信息();  个人信息.Show();  this.Hide();  }  private void button3_Click(object sender, EventArgs e) //进入学员个人信息  {  教练_学员信息 学员信息 = new 教练_学员信息();  学员信息.Show();  this.Hide();  }  private void button4_Click(object sender, EventArgs e) //对学员进行信息通知及接收学员消息  {  教练_信息通信 学员通信 = new 教练_信息通信();  学员通信.Show();  }  private void button5_Click(object sender, EventArgs e) //进入请假页面  {  教练_请假申报 请假申报 = new 教练_请假申报();  请假申报.Show();  }  private void button6_Click(object sender, EventArgs e) //签到按钮  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select count(用户名) as A from 签到表 where 日期='" + monthCalendar1.SelectionStart.ToString() + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  string x = dt["A"].ToString();  dt.Close();  if (x == "1")  {  MessageBox.Show("已完成签到，勿重复签到。");  }  else  {  sqlCommand = new SqlCommand("insert into 签到表 values ('" + 登录页面.strname + "','" + monthCalendar1.SelectionStart.ToString() + "')", con);  sqlCommand.ExecuteNonQuery();  MessageBox.Show("签到成功！");  dt.Close();  con.Close();  }  }  }  private void monthCalendar1_DateChanged(object sender, DateRangeEventArgs e)  {    }  } } |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**教练个人信息界面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 教练_教练个人信息 : Form  {  public 教练_教练个人信息()  {  InitializeComponent();  }   private void button1_Click(object sender, EventArgs e)  {  //this.Close();  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("update 教练表 set 教练用户名 = '" + textBox1.Text + "',教练姓名='" + textBox2.Text + "',性别='" + textBox3.Text + "',年龄='" + textBox4.Text + "',联系电话='" + textBox5.Text + "',身份证='" + textBox6.Text + "' where 教练用户名='" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  }  private void button2_Click(object sender, EventArgs e)  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select \* from 教练表 where 教练用户名 = '" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox1.Text = dt["教练用户名"].ToString();  textBox2.Text = dt["教练姓名"].ToString();  textBox3.Text = dt["性别"].ToString();  textBox4.Text = dt["年龄"].ToString();  textBox5.Text = dt["联系电话"].ToString();  textBox6.Text = dt["身份证"].ToString();  textBox7.Text = dt["教龄"].ToString();  textBox8.Text = dt["可用车辆"].ToString();  textBox9.Text = dt["可用场地"].ToString();  }  dt.Close();    }  private void button3_Click(object sender, EventArgs e)  {  教练页面 frm1 = new 教练页面();  frm1.Show();  this.Hide();  }  } }  |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**教练查询自己学员信息源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 教练_学员信息 : Form  {  public 教练_学员信息()  {  InitializeComponent();  }  private void button1_Click(object sender, EventArgs e)  {  教练页面 frm1 = new 教练页面();  frm1.Show();  this.Close();  }  private void textBox1_TextChanged(object sender, EventArgs e)  {    //textBox2.Text = "1";  //string sqlc = "Server=DESKTOP-4C0LIDG\\\\SQLEXPRESS;User Id=KIANA;Pwd=123456;DataBase=驾校管理系统";  //SqlConnection con = new SqlConnection(sqlc);  //con.Open();  //SqlCommand sqlCommand = new SqlCommand("select 姓名 from 学员表 where 学员用户名 = '" + 登录页面.strname + "'", con);   ////SqlCommand sqlCommand = new SqlCommand("select 学员姓名 from 学员表 where 学员用户名='" + 登录页面.strname + "'");  //SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();  //if(sqlDataReader.Read())  //{  // textBox1.Text = sqlDataReader["学员姓名"].ToString();  //}  }  private void button2_Click(object sender, EventArgs e) //对本教练学员进行信息查询  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select \* from 学员表 where 学员姓名 = @学员姓名 AND 教练用户名 = '" + 登录页面.strname + "'", con);  sqlCommand.Parameters.AddWithValue("@学员姓名", this.textBox1.Text);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox1.Text = dt["学员姓名"].ToString();  textBox2.Text = dt["性别"].ToString();  textBox3.Text = dt["年龄"].ToString();  textBox4.Text = dt["身份证"].ToString();  textBox5.Text = dt["报考类型"].ToString();  textBox6.Text = dt["报名时间"].ToString();  textBox7.Text = dt["到期时间"].ToString();  textBox8.Text = dt["学车时长"].ToString();  textBox9.Text = dt["已考科目"].ToString();  textBox10.Text = dt["未考科目"].ToString();   }  else { MessageBox.Show("输入的学员不存在/无权访问其他教练的学员"); }  con.Close();  dt.Close();  }  private void listView1_SelectedIndexChanged_1(object sender, EventArgs e)  {    }   private void button3_Click(object sender, EventArgs e)  {   //创建数据库连接类的对象  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  //执行con对象的函数，返回一个SqlCommand类型的对象  SqlCommand cmd = con.CreateCommand();  //把输入的数据拼接成sql语句，并交给cmd对象  cmd.CommandText = "select 学员姓名,联系电话 from 学员表 where 教练用户名 = '" + 登录页面.strname + "'";   //用cmd的函数执行语句，返回SqlDataReader类型的结果dr,dr就是返回的结果集（也就是数据库中查询到的表数据）  SqlDataReader dr = cmd.ExecuteReader();  //用dr的read函数，每执行一次，返回一个包含下一行数据的集合dr  while (dr.Read())  {  //构建一个ListView的数据，存入数据库数据，以便添加到listView1的行数据中  ListViewItem lt = new ListViewItem();  //将数据库数据转变成ListView类型的一行数据  lt.Text = dr["学员姓名"].ToString();  lt.SubItems.Add(dr["联系电话"].ToString());  //将lt数据添加到listView1控件中  listView1.Items.Add(lt);  }  con.Close();  }  } } |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**教练信息通信源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 教练_信息通信 : Form  {  public 教练_信息通信()  {  InitializeComponent();  }   private void textBox1_TextChanged(object sender, EventArgs e)  {    }   private void 教练_学员通信_Load(object sender, EventArgs e)  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  string strsql = "BULK INSERT 教练消息表 FROM 'd:\\\\information_bulletin.txt' WITH (ROWTERMINATOR = '\\n') select \* from 教练消息表;";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  SqlDataReader sqlDataReader = comm.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断是否有数据  {  while (sqlDataReader.Read())//循环读取sqlDataReader对象中的数据  {  string str = (string)sqlDataReader["data"];//强制转换不可忘  textBox5.Text = str;  }   }  else  {  MessageBox.Show("无信息可读！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  SqlConnection con1 = new SqlConnection(sqlc);  SqlDataAdapter sqlDataAdapter1 = new SqlDataAdapter("select \* from 教练_学员消息表", con1);  DataSet mytb1 = new DataSet();  sqlDataAdapter1.Fill(mytb1, " 教练_学员消息表");  dataGridView2.DataSource = mytb1.Tables[" 教练_学员消息表"];  }  private void button1_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0LIDG\\\\SQLEXPRESS;User Id=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("update 管理员消息表 set 教练消息='" + textBox1.Text + "' where 用户名='" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  MessageBox.Show("发送成功！");  dt.Close();  con.Close();  }  private void button3_Click(object sender, EventArgs e)  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select 回复 from 管理员消息表 where 用户名='" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox3.Text = dt["回复"].ToString();  }  dt.Close();  con.Close();  }  private void button5_Click(object sender, EventArgs e)  {  //给学员回复  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统; MultipleActiveResultSets=true;";  SqlConnection con = new SqlConnection(sqlc);  if (con.State == ConnectionState.Closed)//连接数据库  {  con.Open();  }  SqlCommand sqlCommand = new SqlCommand("select \* from 教练_学员消息表 where 用户名 = '" + textBox7.Text + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();//返回读到的数据  try  {  if (sqlDataReader.HasRows)//判断用户是否存在  {  string strsql = "update 教练_学员消息表 set 回复='" + textBox6.Text + "' where 用户名 = '" + textBox7.Text + "'";  SqlCommand comm = new SqlCommand(strsql, con);  if (con.State == ConnectionState.Closed)  {  con.Open();  }  if (Convert.ToInt32(comm.ExecuteNonQuery()) \> 0)  {  MessageBox.Show("回复成功！");  }  else  {  MessageBox.Show("回复失败！");  }  //回复完后清空textBox  textBox7.Text = "";  textBox6.Text = "";  con.Close();  }  else  {  MessageBox.Show("该用户名不存在，请更换用户名！");  }  }  catch (SqlException ex)//捕捉异常数据  {  MessageBox.Show(ex.ToString());//输出错误信息  }  finally  {  sqlDataReader.Close();  con.Close();  }  }   private void button2_Click(object sender, EventArgs e)  {  this.Close();  教练_信息通信 cs = new 教练_信息通信();  cs.Show();  }  } }  |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**教练请假申报源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 教练_请假申报 : Form  {  public 教练_请假申报()  {  InitializeComponent();  }  private void button1_Click(object sender, EventArgs e)  {  string sqlc = "Server=LAPTOP-GJ0RJN64;User Id=sa;Pwd=123456;DataBase=驾校信息管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select count(教练用户名) as A from 教练请假表 where 请假日期='" + monthCalendar1.SelectionStart.ToString() + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  string x = dt["A"].ToString();  dt.Close();  if (x == "1")  {  MessageBox.Show("当天已申请休假，勿重复申请。");  }  else  {  sqlCommand = new SqlCommand("select 教练姓名 from 教练表 where 教练用户名 = '" + 登录页面.strname + "'", con);  SqlDataReader sqlDataReader = sqlCommand.ExecuteReader();  if(sqlDataReader.Read())  {  string str = sqlDataReader["教练姓名"].ToString();  sqlDataReader.Close();  sqlCommand = new SqlCommand("insert into 教练请假表 values ('" + 登录页面.strname + "','"+str +"','"+ monthCalendar1.SelectionStart.ToString() + "')", con);  sqlCommand.ExecuteNonQuery();  MessageBox.Show("申请成功！");  con.Close();  }  }  }  }  private void button2_Click(object sender, EventArgs e)  {  教练页面 frm1 = new 教练页面();  frm1.Show();  this.Hide();  }  }} |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

（4）学员模块代码实现

**学员主页面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient;  namespace 驾校信息管理系统 {  public partial class 学员页面 : Form  {  public 学员页面()  {  InitializeComponent();  }   private vo用户名 button1_Click(object sender, EventArgs e)  {  //返回登录页面  登录页面 登录 = new 登录页面();  登录.Show();  this.H用户名e();  }   private vo用户名 学员页面_Load(object sender, EventArgs e)  {  toolStripStatusLabel1.Text = "登录用户：" + 登录页面.strname; //显示登录用户  toolStripStatusLabel2.Text = " \|\| 登录时间：" + DateTime.Now.ToString();  }   private vo用户名 button_yuyue_Click(object sender, EventArgs e)  {  预约练车页面 form1 = new 预约练车页面();  form1.Show();  }   private vo用户名 button_geren_Click(object sender, EventArgs e)  {  学员个人信息页面 form1 = new 学员个人信息页面();  form1.Show();  }   private vo用户名 button2_Click(object sender, EventArgs e)  {  驾考成绩页面 form1 = new 驾考成绩页面();  form1.Show();  }   private vo用户名 button3_Click(object sender, EventArgs e)  {  System.Diagnostics.Process.Start("https://tiba.jsyks.com/");  }   private vo用户名 button4_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select count(用户名) as A from 签到表 where 日期='" + monthCalendar1.SelectionStart.ToString() + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  string x = dt["A"].ToString();  dt.Close();  if (x == "1")  {  MessageBox.Show("已完成签到，勿重复签到。");  }  else  {  sqlCommand = new SqlCommand("insert into 签到表 values ('" + 登录页面.strname + "','" + monthCalendar1.SelectionStart.ToString() + "')", con);  sqlCommand.ExecuteNonQuery();  MessageBox.Show("签到成功！");  dt.Close();  con.Close();  }  }  }   private vo用户名 button5_Click(object sender, EventArgs e)  {  消息页面 form1 = new 消息页面();  form1.Show();  }  } }  |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**个人信息界面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient; namespace 驾校信息管理系统 {  public partial class 学员个人信息页面 : Form  {  public 学员个人信息页面()  {  InitializeComponent();  }  private vo用户名 button1_Click(object sender, EventArgs e)  {  //this.Close();  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("update 学员表 set 学员姓名 = '" + textBox1.Text + "',性别='"+textBox2.Text+"',年龄='"+textBox3.Text+"',身份证号='"+textBox4.Text+"',电话='"+textBox13.Text+"' where 学员用户名='"+登录页面.strname+"'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  }   private vo用户名 textBox1_TextChanged(object sender, EventArgs e)  {   }  private vo用户名 button2_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select \* from 学员表 where 学员用户名 = '" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox1.Text = dt["学员姓名"].ToString();  textBox2.Text = dt["性别"].ToString();  textBox3.Text = dt["年龄"].ToString();  textBox4.Text = dt["身份证号"].ToString();  textBox5.Text = dt["报考类型"].ToString();  textBox6.Text = dt["报名时间"].ToString();  textBox7.Text = dt["到期时间"].ToString();  textBox8.Text = dt["学车时长"].ToString();  textBox9.Text = dt["已考科目"].ToString();  textBox10.Text = dt["未考科目"].ToString();  textBox13.Text = dt["电话"].ToString();  }  dt.Close();  sqlCommand = new SqlCommand("select \* from 教练表 where 教练用户名 in (select 教练用户名 from 学员表 where 学员用户名= '" + 登录页面.strname + "')", con);  SqlDataReader dt1 = sqlCommand.ExecuteReader();  if (dt1.Read())  {  textBox11.Text = dt1["教练姓名"].ToString();  textBox12.Text = dt1["电话"].ToString();  dt1.Close();  con.Close();  }  }   } }  |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

**消息界面源码：**

| using System; using System.Collections.Generic; using System.ComponentModel; using System.Data; using System.Drawing; using System.Linq; using System.Text; using System.Threading.Tasks; using System.Windows.Forms; using System.Data.SqlClient;  namespace 驾校信息管理系统 {  public partial class 消息页面 : Form  {  public 消息页面()  {  InitializeComponent();  }   private vo用户名 button1_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select 学员公告 from 公告表 where 用户名='" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox1.Text = dt["学员公告"].ToString();  }  dt.Close();  con.Close();  }   private vo用户名 button3_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select 管理员回复 from 管理员消息表 where 用户名='" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox3.Text = dt["管理员回复"].ToString();  }  dt.Close();  con.Close();  }   private vo用户名 button2_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("update 管理员消息表 set 用户消息='" +textBox2.Text+"' where 用户名='"+ 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  MessageBox.Show("发送成功！");  dt.Close();  con.Close();  }   private vo用户名 button4_Click(object sender, EventArgs e)  {  string sqlc = "Server=DESKTOP-4C0L用户名G\\\\SQLEXPRESS;User 用户名=KIANA;Pwd=123456;DataBase=驾校管理系统";  SqlConnection con = new SqlConnection(sqlc);  con.Open();  SqlCommand sqlCommand = new SqlCommand("select 教练对学员消息 from 管理员消息表 where 用户名='" + 登录页面.strname + "'", con);  SqlDataReader dt = sqlCommand.ExecuteReader();  if (dt.Read())  {  textBox4.Text = dt["教练对学员消息"].ToString();  }  dt.Close();  con.Close();  }  } } |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

3、软件测试

登录页面通过输入用户名和密码进行登录，可以选择管理员、教练、学员进行登录，密码输入时会由\*代替，保护隐私，如果没有账号则可以点击注册

![](media/a1308d3453a19aadfe00551f2798cb7d.png)

注册页面，通过输入用户名，两次相同的密码，邮箱以及验证码，选择教练或者学员来进行注册，如果两次密码不相同，则会提示密码不一致。

![](media/319696c092d7906f22641aeb1a6dfaeb.png)

学员页面：

![](media/85230d242b4e97cd28af1379ce9c3635.png)

登录后的学员界面，monthcalender控件运行后会隐藏，查看信息按钮能够接收教练与驾校发送的消息，并且发送消息给教练或驾校。个人信息页面能够查看并修改个人信息。预约练车页面可以预约练车时间，如果当天该时段人数已满四人则会提示重新选择预约时间。驾考成绩页面可以查询自己的驾考通过情况。题库阅览页面可以跳转到题库网页进行预习复习驾考知识点。签到按钮提供当日签到打卡功能。

![](media/05a532c8c6bf21a0a9c0e10eb5bcfdd0.png)

**查看消息页面**

![](media/825fb4c2eb43e8ee27a4ad5dc2838c7f.png)

**个人信息页面**

![](media/07b93d3a631e46fbd1bb1cfeddffe560.png)

**预约练车页面**

![](media/82883bc231ff61208cb678d719b0adb8.png)

**驾考成绩页面**

**![](media/0e7d63f4cfc625420d1a9e93067c0ec8.png)**

**题库网页**

**![](media/132b9f43e2fb111704e16daeb76d0d7b.png)**

**签到功能**

**教练页面：**

**![](media/81b68f8247a1bbeefd8c2a3e913530f7.png)**

登录后的教练界面，monthcalender控件运行后会隐藏。签到功能可以每日签到，可以阻止一天重复签到。个人信息页面能够查看并修改个人信息。学员信息可以查看该教练教导的学员信息。消息通知可以接收公告信息，对驾校（管理员）发消息，以及对具体学员发送消息，以及接收对方的消息。请假申报可以通过点击具体日期向管理员进行请假，所有请假信息都会被保存下来。

**![](media/20c87d6df4f3d84dd232801001ffeb2f.png)**

**签到功能**

**![](media/60dfc9f9e2001a4d6034ac813cfc7d50.png)**

**教练个人信息页面**

**![](media/3504ee652330215dee2bc882e07400da.png)**

**教练查询学员信息页面**

**![](media/ee7936f3788f728ec50924fb4062c677.png)**

**消息通知页面**

**![](media/95101d6a43d8d6dd2d0d645803bed92a.png)**

**请假申报页面**

**管理员页面：**

**![](media/f12131d0da41dbc7b72dc0986b49d4dc.png)**

管理页面主要采用子窗口的模式；管理员可以对自己的个人信息进行查询修改更新操作；在我的消息中可以接收学员、教练的信息。可以添加教练，学员，更改信息，而管理员不能通过注册添加，只能管理员添加。添加学员里有年龄要满18，身份证不能相同，能够查看科目考试情况，报考日期、截至日期等等...管理员还可以查询管理员、学员、教练信息。公告有分学员公告和教练公告，通

过管理员进行编辑。帮助里有查看帮助、发送反馈、检查更新功能。

**![](media/631fd999afb11ae07a1c354f0b4c27b9.png)**

**账户信息页面**

**![](media/8a7592b1b3e0253732dba46e9bddc8f9.png)**

**消息页面**

**![](media/6534bfa615266173f2cdf3d9dedc0bbc.png)**

**添加/更新管理员页面**

**![](media/d06f440ccecd0eb3f93aba030fa4e32c.png)**

**添加/更新教练页面**

**![](media/5c0b611390b5679fe6cc696a7a130770.png)**

**添加/更新学员页面**

**![](media/719193219455e293645096df6b97d134.png)**

**查询管理员信息页面**

**![](media/4df55546598721f762f649978bedee3e.png)**

**查询教练信息页面**

**![](media/07b2f83988aef47487c194cf9f34324b.png)**

**查询学员信息页面**

**![](media/d8b4395a0914b3a2288f589cd88b4be5.png)**

**查询请假信息页面**

**![](media/008c853f1326166ebd1687e6d194da5c.png)**

**公告页面**

**![](media/1690bf8d50d869d829ccc23f307e0e4b.png)**

**小功能页面**

**三、课设总结**

通过本次数据库课设，我们三人小组间由匡腾瞻负责教练及其衍生页面部分，李阳阳负责管理员及其衍生页面部分，黄雨洁负责学员及其衍生页面部分，我们在课本外对数据库系统的运作原理有了一个更深的理解，并且通过实施过程中对数据库建立的数据与需求分析，我们更加了解了数据本身的结构与他们之间互相的联系。在各种因调试数据库而出现的种种问题上，我们又掌握了更多的快速而正确地调试数据库将它达到一个可用状态的方法与出现问题时该从哪方面解决、如何解决的手段与思路。而且在这次数据库课程设计中，我们最大的收获是在开发数据库系统交互界面时掌握了一门新的面向对象的界面开发语言C\#，通过使用这门语言，我们开发出了当前展示的这款具有用户交互界面的驾校管理系统，而且掌握了这门课程外的语言，想必会对我们日后对于其他计算机类专业课程的学习会有一定的裨益。
